---
title: "Untitled"
author: "Linus Widmer"
date: "2025-07-21"
output: html_document
---

load library
```{r}
library(dplyr)
library(here)
library(ggplot2)
library(stringr)
library(R.utils)
```

load scripts
```{r}
source("word-catalog.R")
source("items-and-labels.R")
source("data-preprocessing.R")
source("utils.R")
```

## Load and Preprocess data
```{r}
df_raw = read.csv("data/results-pre-test.csv")
df = preprocessData(df_raw, all_items)
```

## Exclusion Criteria 

1. Debrief consent = Y
2. Study inclusion Criteria 
 2.1 AGE >= 18
 2.2 SEX = M
 2.3 GER = Muttersprache
3. Manipulation Control
  3.1. GKFEEDBACK = depending on ThreatCondition
  3.2. OPENFEEDBACK auswerten
  3.3. SUS & SUSTEXT auswerten
4. WFCT comprehension check
  => More than 50% are real words...

### Debrief Consent
```{r}
df = df %>% 
  filter(DEBRIEFCONSENT == "Y")
count(df)$n
```


Study inclusion criteria
```{r}
df = df %>% 
  filter(AGE >= 18) %>% 
  filter(SEX == "AO01") 
  # %>% filter(GER == "AO05")
count(df)$n
```

Manipulation control
```{r}
# if threatCondition == "threat"
  # GKFEEDBACK == "AO02" | "GKFEEDBACK == "AO02"
# if threatCondition == "noThreat"
  # GKFEEDACK == "AO04"

table(df$GKFEEDBACK, df$threatCondition)
table(df$GKSELF)

ggplot(df, aes(x = GKFEEDBACK_label, fill = threatCondition)) +
  geom_bar(position = "dodge") +
  labs(
    title = "GK-Feedback nach Bedingung",
    x = NULL,
    y = "Anzahl",
    fill = "Bedingung"
  ) +
  theme_minimal() +
  coord_flip() +
  theme(
    axis.text.y = element_text(size = 10),
    legend.position = "top"
  )

```


## Descriptive Analysis

### Age
```{r}
meanAndSD(df$AGE, "AGE")
```

## Educational Degree

```{r}
# table(df$EDU)
ggplot(df, aes(x = EDU_label)) +
  geom_bar(fill = "#4E79A7") +
  labs(
    title = "Was ist ihr höchster Schulabschluss?",
    x = NULL,
    y = "Anzahl"
  ) +
  theme_minimal() +
  coord_flip()

```


```{r}

ggplot(df, aes(x = OCC_label)) +
  geom_bar(fill = "#59A14F") +
  labs(
    title = "Welchen höchsten beruflichen Abschluss haben Sie?",
    x = NULL,
    y = "Anzahl"
  ) +
  theme_minimal() +
  coord_flip()

```

